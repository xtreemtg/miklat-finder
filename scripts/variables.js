GABASH_COORDS =[
    [32.072783, 34.843219],
    [32.072795, 34.843239],
    [32.074060, 34.843665],
    [32.085175, 34.845661],
    [32.090251, 34.845762],
    [32.089622, 34.847591],
    [32.086898, 34.848347],
    [32.086898, 34.848347],
    [32.086690, 34.852232],
    [32.086560, 34.853492],
    [32.085951, 34.856301],
    [32.080394, 34.855483],
    [32.080259, 34.860142],
    [32.067942, 34.859067],
    [32.065709, 34.844922],
    [32.071188, 34.845660],
    [32.070022, 34.850275],
    [32.072980, 34.850913],
    [32.074728, 34.846986],
    [32.072428, 34.844222],
    [32.072783, 34.843219]
]

MIKLATS = [
 {
  "name":"Botique HaGiva",
  "address":"HaAvoda Street 1",
  "lat":32.07881561,
  "long":34.84879607,
  "size":100.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":503.0,
  "addressHeb":"העבודה 1",
  "nameHeb":"בוטיק הגבעה",
  "commentsHeb":null
 },
 {
  "name":"Shufersal",
  "address":"David Ben Gurion Street 18",
  "lat":32.07728844,
  "long":34.84674331,
  "size":150.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":514.0,
  "addressHeb":"בן גוריון 18",
  "nameHeb":"שופרסל",
  "commentsHeb":null
 },
 {
  "name":"Gan Golani",
  "address":"Herzl Street 4",
  "lat":32.07506268,
  "long":34.84931257,
  "size":150.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":511.0,
  "addressHeb":"הרצל 4",
  "nameHeb":"גן גולני",
  "commentsHeb":null
 },
 {
  "name":"Yad LBanim",
  "address":"Sderot HaGiborim",
  "lat":32.0760697,
  "long":34.8486997,
  "size":70.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":510.0,
  "addressHeb":"שדרות הגבורים",
  "nameHeb":"יד לבנים",
  "commentsHeb":null
 },
 {
  "name":"Kidum Noar",
  "address":"Be'eri St & Ha-Zeitim St",
  "lat":32.07987355,
  "long":34.85221805,
  "size":100.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":507.0,
  "addressHeb":"הזיתים פינת בארי",
  "nameHeb":"קידום נוער",
  "commentsHeb":null
 },
 {
  "name":"Mercaz Hatachlut",
  "address":"HaNasi Street 18",
  "lat":32.08074242,
  "long":34.8516817,
  "size":120.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":505.0,
  "addressHeb":"הנשיא 18",
  "nameHeb":"מרכז התחלות",
  "commentsHeb":null
 },
 {
  "name":"French Synagogue",
  "address":"HaNasi Street 17",
  "lat":32.08102392,
  "long":34.85126022,
  "size":120.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":506.0,
  "addressHeb":"הנשיא 17",
  "nameHeb":"בי\"כ צרפתים",
  "commentsHeb":null
 },
 {
  "name":"Beit El Synagogue",
  "address":"HaNasi Street 13-14",
  "lat":32.081032,
  "long":34.849944,
  "size":100.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":504.0,
  "addressHeb":"הנשיא 13-14",
  "nameHeb":"בית אל",
  "commentsHeb":null
 },
 {
  "name":"Beit Midrash",
  "address":"HaNasi Street 9-12",
  "lat":32.081341,
  "long":34.849216,
  "size":100.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":509.0,
  "addressHeb":"הנשיא 9-12",
  "nameHeb":"בית מדרש",
  "commentsHeb":null
 },
 {
  "name":"Midrash Shmuel",
  "address":"HaNasi Street 5-8",
  "lat":32.081649,
  "long":34.848609,
  "size":128.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":501.0,
  "addressHeb":"הנשיא 5-8",
  "nameHeb":"מדרש שמואל",
  "commentsHeb":null
 },
 {
  "name":"Community Center Branch",
  "address":"HaNasi Street 1-4",
  "lat":32.082125,
  "long":34.847213,
  "size":100.0,
  "type":"Public",
  "description":null,
  "isPublic":true,
  "comments":null,
  "cityID":508.0,
  "addressHeb":"הנשיא 1-4",
  "nameHeb":"שלוחת המתנ\"ס",
  "commentsHeb":null
 },
 {
  "name":"Bialik Street 3",
  "address":"Bialik Street 3",
  "lat":32.07835,
  "long":34.846239,
  "size":null,
  "type":"Apartment",
  "description":"floor -1",
  "isPublic":false,
  "comments":null,
  "cityID":null,
  "addressHeb":"ביאליק 3",
  "nameHeb":"ביאליק 3",
  "commentsHeb":null
 },
 {
  "name":"Alonim St 4a",
  "address":"Alonim St 4a",
  "lat":32.069192,
  "long":34.846499,
  "size":null,
  "type":"Apartment",
  "description":"floor -1",
  "isPublic":false,
  "comments":null,
  "cityID":null,
  "addressHeb":"אלונים 4א",
  "nameHeb":"אלונים 4א",
  "commentsHeb":null
 },
 {
  "name":"David Elazar Street 10",
  "address":"David Elazar Street 10",
  "lat":32.0796,
  "long":34.847398,
  "size":null,
  "type":"Apartment",
  "description":"ground floor",
  "isPublic":false,
  "comments":null,
  "cityID":null,
  "addressHeb":"דוד אלעזר 10",
  "nameHeb":"דוד אלעזר 10",
  "commentsHeb":null
 },
 {
  "name":"Rahvat Ilan 12a",
  "address":"Rahvat Ilan 12a",
  "lat":32.070864,
  "long":34.846486,
  "size":null,
  "type":"Apartment",
  "description":"floor -1",
  "isPublic":false,
  "comments":null,
  "cityID":null,
  "addressHeb":"רחבת אילן 12א",
  "nameHeb":"רחבת אילן 12א",
  "commentsHeb":null
 },
 {
  "name":"Yoni Netanyahu St 20",
  "address":"Yoni Netanyahu St 20",
  "lat":32.075378,
  "long":34.855317,
  "size":null,
  "type":"Apartment",
  "description":"stairwell",
  "isPublic":false,
  "comments":null,
  "cityID":null,
  "addressHeb":"יוני נתניהו 20",
  "nameHeb":"יוני נתניהו 20",
  "commentsHeb":null
 },
 {
  "name":"David Ben Gurion Street 5",
  "address":"David Ben Gurion Street 5",
  "lat":32.07734,
  "long":34.846587,
  "size":null,
  "type":"Apartment",
  "description":"ground floor",
  "isPublic":false,
  "comments":null,
  "cityID":null,
  "addressHeb":"בן גוריון 5",
  "nameHeb":"בן גוריון 5",
  "commentsHeb":null
 },
 {
  "name":"David Ben Gurion Street 7",
  "address":"David Ben Gurion Street 7",
  "lat":32.077069,
  "long":34.846301,
  "size":null,
  "type":"Apartment",
  "description":"ground floor",
  "isPublic":false,
  "comments":null,
  "cityID":null,
  "addressHeb":"בן גוריון 7",
  "nameHeb":"בן גוריון 7",
  "commentsHeb":null
 },
 {
  "name":"David Ben Gurion Street 9c",
  "address":"David Ben Gurion Street 9c",
  "lat":32.077538,
  "long":34.845453,
  "size":null,
  "type":"Apartment",
  "description":"floor -1",
  "isPublic":false,
  "comments":null,
  "cityID":null,
  "addressHeb":"בן גוריון 9ג",
  "nameHeb":"בן גוריון 9ג",
  "commentsHeb":null
 },
 {
  "name":"Rambam St 11a",
  "address":"Rambam St 11a",
  "lat":32.075628,
  "long":34.84956,
  "size":null,
  "type":"Apartment",
  "description":"ground floor",
  "isPublic":false,
  "comments":"on the left upon entering",
  "cityID":null,
  "addressHeb":"רמב״ם 11א ",
  "nameHeb":"רמב״ם 11א ",
  "commentsHeb":null
 },
 {
  "name":"Simtat Yitskhak Moda'i 5",
  "address":"Simtat Yitskhak Moda'i 5",
  "lat":32.075372,
  "long":34.856163,
  "size":null,
  "type":"Apartment",
  "description":"stairwell",
  "isPublic":false,
  "comments":"stairwells on the left",
  "cityID":null,
  "addressHeb":"סמטת יצחק מודעי 5",
  "nameHeb":"סמטת יצחק מודעי 5",
  "commentsHeb":null
 }
]

function haversineDistance(coord1, coord2) {
    // Convert latitude and longitude from degrees to radians
    const [lat1, lon1] = coord1.map(coord => coord * (Math.PI / 180));
    const [lat2, lon2] = coord2.map(coord => coord * (Math.PI / 180));

    // Haversine formula
    const dLat = lat2 - lat1;
    const dLon = lon2 - lon1;
    const a = Math.sin(dLat/2)**2 + Math.cos(lat1) * Math.cos(lat2) * Math.sin(dLon/2)**2;
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

    // Radius of the Earth in kilometers
    const radius = 6371.0;

    // Calculate the distance
    let distance = (radius * c) * 1000;

    return distance;
}

function pointInGabash(point) {
      let i, j, c = false;
      const n = GABASH_COORDS.length;
      for (i = 0, j = n - 1; i < n; j = i++) {
          if (((GABASH_COORDS[i][1] > point[1]) !== (GABASH_COORDS[j][1] > point[1])) &&
              (point[0] < (GABASH_COORDS[j][0] - GABASH_COORDS[i][0]) * (point[1] - GABASH_COORDS[i][1]) / (GABASH_COORDS[j][1] - GABASH_COORDS[i][1]) + GABASH_COORDS[i][0])) {
              c = !c;
          }
      }
      return c;
}