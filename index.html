<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Miklat Finder</title>
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBfF4P88BWO3BKU-3L8iII3YjMTzVX0sxg&libraries=places&callback=Function.prototype"></script>
    <link rel="stylesheet" href="styles.css">
    <script src="scripts/variables.js"></script>
    <script src="scripts/map.js"></script>
    <script src="locales/en.json"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>
<body onload="createPlacesAutcomplete();">
    <div style="text-align: center;">
        <h1 style="color: #FF0000;" locale-value="banner-message">GIVAT SHMUEL ONLY</h1>
        <div>
            <button class="find" onclick="createMap();" locale-value="nearest-miklat-button">Find nearest miklat</button>
            <div locale-value="by-address">OR by address</div>
            <div>
                <input id="addressbar" type="text" placeholder="Input address" locale-value="address-search" style="max-width: 300px; width: 100%;"></input>
                <span id="address-error" locale-value="address-error" style="position: relative;color: #FF0000;display: none;">Could not find location specified</span>
            </div>
        </div>
        <table border="1" id="miklats" style="display: none;">
            <tr>
                <th locale-value="miklat-num">Number</th>
                <th locale-value="miklat-name">Miklat Name</th>
                <th locale-value="miklat-address">Address</th>
                <th locale-value="miklat-notes">Notes</th>
                <th locale-value="miklat-distance">Distance away<span> (m)</span></th>
                <th locale-value="miklat-size">Size<span> (m<sup>2</sup>)</span></th>
            </tr>
        </table>
        <div id="map" style="width: 500px; height: 400px; display: none; margin-left: auto; margin-right: auto;"></div>
    </div>
    <div style="text-align: center;">
        <h4 locale-value="cant-reach-start">If you can't reach a mamad/miklat in time and are...</h4>
        <ul class="wrapper">
            <li>
                <button class="collapsible building">
                    <img src="images/building.png"></img>
                    <span locale-value="location-indoors">Indoors</span>
                </button>
                <ul class="content">
                    <li locale-value="stairwell-instruction"><b locale-value="stairwell-text">Inner stairwell - </b>without windows, openings or external walls. Sit on the stairs and not in the floor space. In a building with more than three floors – stay in the staircase that has at least two floors above it. In a building with less than three floors – stay in the middle floor.</li>
                    <li locale-value="room-instruction"><b locale-value="room-text">Inner room - </b>with as few outside walls, windows and openings as possible. Sit in an inner corner under a window line and not In front of the door. Kitchens, bathrooms or toilets cannot be used as an inner room.</li>
                </ul>
            </li>
            <li>
                <button class="collapsible">
                    <img src="images/tree.png"></img>
                    <span locale-value="location-outside">Outside</span>
                </button>
                <ul class="content">
                    <li locale-value="built-up-instruction"><b locale-value="built-up-text">In a built-up area - </b>enter a shelter or a stairwell of a nearby building. Stay away from the entrance area.</li>
                    <li locale-value="open-area-instruction"><b locale-value="open-area-text">In an open area - </b>lie on the ground and protect your head with your hands. When a rocket hits the ground, the explosion blast wave generates fragments that can injure anyone standing up or sitting down.</li>
                </ul>
            </li>
            <li>
                <button class="collapsible">
                    <img src="images/car.png"></img>
                    <span locale-value="location-vehicle">In a vehicle</span>
                </button>
                <ul class="content">
                    <li locale-value="vehicle-instruction1">Stop the vehicle on the side of the road, get out of the car and enter a shelter or a stairwell in a nearby building.</li>
                    <li locale-value="vehicle-instruction2">If you cannot reach shelter within the time available to reach shelter – get out and move away from the vehicle to the side of the road or beyond the separation fence, lie on the ground and protect your head with your hands.</li>
                    <li locale-value="vehicle-instruction3">Only if you are unable to get out of the vehicle, stop at the side of the road and bend below window line.</li>
                </ul>
            </li>
            <li>
                <button class="collapsible">
                    <img src="images/bus.png"></img>
                    <span locale-value="location-public-transportation">On public transportation</span>
                </button>
                <ul class="content">
                    <li locale-value="intracity-transportation-instruction"><b locale-value="intracity-transportation-text">On an intercity bus and student transportation - </b>the driver must stop the vehicle at the side of the road and open the doors, and the passengers must bend below the window line and protect their heads with their hands.</li>
                    <li locale-value="intercity-transportation-instruction"><b locale-value="intercity-transportation-text">On a city bus - </b>the driver must stop on the side of the road and open the doors for the passengers to get off and enter a nearby building. If it is not possible to reach the building in the time available, bend below the window line and protect your head with your hands.</li>
                    <li locale-value="train-instruction"><b locale-value="train-text">When traveling by train - </b>the driver must slow down to a speed of 30 km/h for 10 minutes, the passengers must bend below the window line in the carriages and protect their heads with their hands.</li>
                </ul>
            </li>
        </ul>
        <small locale-value="attribution-text">(instructions and icons taken from Pikud Haoref at <a locale-value="instruction-link" href="https://www.oref.org.il/12761-en/pakar.aspx">https://www.oref.org.il/12761-en/pakar.aspx</a>)</small>
    </div>
</body>
<script>
// Enable collapsing functionality
var collapsibles = document.getElementsByClassName("collapsible");

for (var i = 0; i < collapsibles.length; i++) {
    collapsibles[i].addEventListener("click", function () {
        this.classList.toggle("active");
        const content = this.nextElementSibling;

        if (content.style.maxHeight)
            content.style.maxHeight = null;
        else
            content.style.maxHeight = content.scrollHeight + "px";
    });
}
</script>
<script src="scripts/localization.js">
</script>
</html>
